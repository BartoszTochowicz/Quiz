{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bartek\\\\OneDrive\\\\Pulpit\\\\GitHub\\\\Quiz\\\\frontend\\\\src\\\\pages\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  var _location$state, _location$state$from;\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isRegisterMode, setIsRegisterMode] = useState(false);\n  const {\n    setAuthenticated,\n    setGlobalEmail,\n    setGlobalUsername\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/account\";\n  function loginUser(event) {\n    event.preventDefault();\n    const logindData = {\n      username: username,\n      password: password\n    };\n    axios.post(\"http://localhost:5000/api/v1/auth/login\", logindData, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      withCredentials: true\n    }).then(response => {\n      console.log(response);\n      console.log(response.data); // Log the response to see its structure\n      if (response.status == 200) {\n        const newAccessToken = response.data.access_token;\n        localStorage.setItem('access_token', newAccessToken);\n        setAuthenticated(true); // Set the authenticated state to true\n        setGlobalUsername(response.data.data.username || ''); // Set username from response\n        setGlobalEmail(response.data.data.email || ''); // Set email from response\n        navigate(from, {\n          replace: true\n        }); // Redirect to intended page\n      } else {\n        alert(\"Login failed. Please check your credentials.\");\n      }\n    }).catch(error => {\n      console.error(\"There was an error logging in!\", error);\n      alert(\"An error occurred. Please try again later.\");\n    });\n  }\n  function registerUser(event) {\n    event.preventDefault();\n    const registerData = {\n      username: username,\n      password: password,\n      email: email\n    };\n    axios.post(\"http://localhost:5000/api/v1/auth/register\", registerData, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      withCredentials: true\n    }).then(response => {\n      console.log(response);\n      console.log(response.data);\n      if (response.status == 200 || response.status == 201) {\n        alert(\"Registration successful! Please login with your credentials.\");\n        setIsRegisterMode(false); // Switch back to login mode\n        // Clear form fields\n        setUsername(\"\");\n        setPassword(\"\");\n        setEmail(\"\");\n      } else {\n        alert(\"Registration failed. Please try again.\");\n      }\n    }).catch(error => {\n      console.error(\"There was an error registering!\", error);\n      alert(\"An error occurred during registration. Please try again later.\");\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"cmlwWantSaRajYS+6VQ1JDi0p3w=\", true, function () {\n  return [useNavigate];\n});\n_c = Login;\n;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","useNavigate","jsxDEV","_jsxDEV","Login","_s","_location$state","_location$state$from","username","setUsername","useState","password","setPassword","email","setEmail","isRegisterMode","setIsRegisterMode","setAuthenticated","setGlobalEmail","setGlobalUsername","useContext","AuthContext","navigate","location","useLocation","from","state","pathname","loginUser","event","preventDefault","logindData","post","headers","withCredentials","then","response","console","log","data","status","newAccessToken","access_token","localStorage","setItem","replace","alert","catch","error","registerUser","registerData","children","fileName","_jsxFileName","lineNumber","columnNumber","type","_c","$RefreshReg$"],"sources":["C:/Users/Bartek/OneDrive/Pulpit/GitHub/Quiz/frontend/src/pages/Login.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Login(){\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [isRegisterMode, setIsRegisterMode] = useState(false);\r\n    const {setAuthenticated, setGlobalEmail, setGlobalUsername} = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const from = location.state?.from?.pathname || \"/account\";\r\n\r\n    function loginUser(event){\r\n        event.preventDefault();\r\n        const logindData = {\r\n            username: username,\r\n            password:password\r\n        };\r\n        axios.post(\"http://localhost:5000/api/v1/auth/login\", logindData, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            withCredentials: true\r\n        })\r\n        .then((response)=>{\r\n            console.log(response);\r\n            console.log(response.data); // Log the response to see its structure\r\n            if(response.status == 200){\r\n                const newAccessToken = response.data.access_token;\r\n                localStorage.setItem('access_token',newAccessToken);\r\n                setAuthenticated(true); // Set the authenticated state to true\r\n                setGlobalUsername(response.data.data.username || ''); // Set username from response\r\n                setGlobalEmail(response.data.data.email || ''); // Set email from response\r\n                navigate(from, {replace: true}); // Redirect to intended page\r\n            } else{\r\n                alert(\"Login failed. Please check your credentials.\");\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error(\"There was an error logging in!\", error);\r\n            alert(\"An error occurred. Please try again later.\");\r\n        })\r\n    }\r\n    function registerUser(event){\r\n        event.preventDefault();\r\n        const registerData = {\r\n            username:username,\r\n            password:password,\r\n            email:email\r\n        };\r\n        axios.post(\"http://localhost:5000/api/v1/auth/register\", registerData,{\r\n            headers:{\r\n                'Content-Type':'application/json'\r\n            },\r\n            withCredentials: true\r\n        })\r\n        .then((response) =>{\r\n            console.log(response)\r\n            console.log(response.data);\r\n            if(response.status==200 || response.status== 201){\r\n                alert(\"Registration successful! Please login with your credentials.\");\r\n                setIsRegisterMode(false); // Switch back to login mode\r\n                // Clear form fields\r\n                setUsername(\"\");\r\n                setPassword(\"\");\r\n                setEmail(\"\");\r\n            }else{\r\n                alert(\"Registration failed. Please try again.\");\r\n            }\r\n        })\r\n        .catch(error =>{\r\n            console.error(\"There was an error registering!\", error);\r\n            alert(\"An error occurred during registration. Please try again later.\");\r\n        });\r\n    }\r\n    return(\r\n        <div>\r\n            <h1>Sign In</h1>\r\n            <form>\r\n                <label>Username</label>\r\n                <input/>\r\n                <label>Password</label>\r\n                <input/>\r\n                <button type=\"submit\">Login</button>\r\n            </form>\r\n        </div>\r\n    )\r\n};\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}